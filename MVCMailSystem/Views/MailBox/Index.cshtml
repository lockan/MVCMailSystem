@model IEnumerable<MVCMailSystem.Models.MailBox>

@{
    ViewBag.Title = "Index";

    var grid = new System.Web.Helpers.WebGrid(source: Model, rowsPerPage: 10);
}
@{}
<h2>MailBoxes</h2>

<p />This shows the GUID links between a messageID and an employee ID. Each GUID pair represents a single message instance.
<br />To view a specific user mailbox you would have to filter this list by a given EmployeeID (GUID) from the employee table to show only their messages.

<p>Known Bug: Entity Framework doesn't seem to liek to display objects that use composite keys. This page will look like there's only one mailID. 
<br/>However, doing an sql query against the database will show that it's actualyl composite key guid pairs for each entry. (All rows unique.) 
<br/> This is to be resolved by adding a "MailDisplay" object that will require an SQL table join to provide all relevant information to the user. 


<table class="table">

    @grid.GetHtml(
        tableStyle: "gridTable",
        headerStyle: "head",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
                    grid.Column("RecipientID"),
                    grid.Column("MailID"),
                    grid.Column("DateReceived"),
                    grid.Column("DateRead"),
                    grid.Column(
                        header: "",
                        style: "text-align-center",
                        format: item => new HtmlString(
                                    Html.ActionLink("Details", "Details", new { ID = item.MailBoxID, mail = item.MailID}).ToString() + " | " +
                                    Html.ActionLink("Delete", "Delete", new { ID = item.RecipientID }).ToString()
                    )
                )
        )
    )

</table>
